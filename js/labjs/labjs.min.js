(function(M){var H=M.$LAB,U="UseLocalXHR",O="AlwaysPreserveOrder",R="AllowDuplicates",S="CacheBust",T="Debug",Z="BasePath",K=/^[^?#]*\//.exec(location.href)[0],L=/^\w+\:\/\/\/?[^\/]+/.exec(K)[0],Y=document.head||document.getElementsByTagName("head"),W=(M.opera&&Object.prototype.toString.call(M.opera)=="[object Opera]")||("MozAppearance" in document.documentElement.style),ab=function(){},Q=ab,C=document.createElement("script"),ad=typeof C.preload=="boolean",F=ad||(C.readyState&&C.readyState=="uninitialized"),E=!F&&C.async===true,D=!F&&!E&&!W;if(M.console&&M.console.log){if(!M.console.error){M.console.error=M.console.log}ab=function(a){M.console.log(a)};Q=function(a,b){M.console.error(a,b)}}function I(a){return Object.prototype.toString.call(a)=="[object Function]"}function N(a){return Object.prototype.toString.call(a)=="[object Array]"}function X(a,b){var c=/^\w+\:\/\//;if(/^\/\/\/?/.test(a)){a=location.protocol+a}else{if(!c.test(a)&&a.charAt(0)!="/"){a=(b||"")+a}}return c.test(a)?a:((a.charAt(0)=="/"?L:K)+a)}function V(b,a){for(var c in b){if(b.hasOwnProperty(c)){a[c]=b[c]}}return a}function ac(b){var a=false;for(var c=0;c<b.scripts.length;c++){if(b.scripts[c].ready&&b.scripts[c].exec_trigger){a=true;b.scripts[c].exec_trigger();b.scripts[c].exec_trigger=null}}return a}function aa(b,c,d,a){b.onload=b.onreadystatechange=function(){if((b.readyState&&b.readyState!="complete"&&b.readyState!="loaded")||c[d]){return}b.onload=b.onreadystatechange=null;a()}}function G(b){b.ready=b.finished=true;for(var a=0;a<b.finished_listeners.length;a++){b.finished_listeners[a]()}b.ready_listeners=[];b.finished_listeners=[]}function J(c,b,d,a,e){setTimeout(function(){var h,f=b.real_src,g;if("item" in Y){if(!Y[0]){setTimeout(arguments.callee,25);return}Y=Y[0]}h=document.createElement("script");if(b.type){h.type=b.type}if(b.charset){h.charset=b.charset}if(e){if(F){if(c[T]){ab("start script preload: "+f)}d.elem=h;if(ad){h.preload=true;h.onpreload=a}else{h.onreadystatechange=function(){if(h.readyState=="loaded"){a()}}}h.src=f}else{if(e&&f.indexOf(L)==0&&c[U]){g=new XMLHttpRequest();if(c[T]){ab("start script preload (xhr): "+f)}g.onreadystatechange=function(){if(g.readyState==4){g.onreadystatechange=function(){};d.text=g.responseText+"\n//@ sourceURL="+f;a()}};g.open("GET",f);g.send()}else{if(c[T]){ab("start script preload (cache): "+f)}h.type="text/cache-script";aa(h,d,"ready",function(){Y.removeChild(h);a()});h.src=f;Y.insertBefore(h,Y.firstChild)}}}else{if(E){if(c[T]){ab("start script load (ordered async): "+f)}h.async=false;aa(h,d,"finished",a);h.src=f;Y.insertBefore(h,Y.firstChild)}else{if(c[T]){ab("start script load: "+f)}aa(h,d,"finished",a);h.src=f;Y.insertBefore(h,Y.firstChild)}}},0)}function P(){var f={},a=F||D,h=[],g={},d;f[U]=true;f[O]=false;f[R]=false;f[S]=false;f[T]=false;f[Z]="";function b(m,k,i){var j;function l(){if(j!=null){j=null;G(i)}}if(g[k.src].finished){return}if(!m[R]){g[k.src].finished=true}j=i.elem||document.createElement("script");if(k.type){j.type=k.type}if(k.charset){j.charset=k.charset}aa(j,i,"finished",l);if(i.elem){i.elem=null}else{if(i.text){j.onload=j.onreadystatechange=null;j.text=i.text}else{j.src=k.real_src}}Y.insertBefore(j,Y.firstChild);if(i.text){l()}}function e(p,l,m,j){var i,n,o=function(){l.ready_cb(l,function(){b(p,l,i)})},k=function(){l.finished_cb(l,m)};l.src=X(l.src,p[Z]);l.real_src=l.src+(p[S]?((/\?.*$/.test(l.src)?"&_":"?_")+~~(Math.random()*1000000000)+"="):"");if(!g[l.src]){g[l.src]={items:[],finished:false}}n=g[l.src].items;if(p[R]||n.length==0){i=n[n.length]={ready:false,finished:false,ready_listeners:[o],finished_listeners:[k]};J(p,l,i,((j)?function(){i.ready=true;for(var q=0;q<i.ready_listeners.length;q++){i.ready_listeners[q]()}i.ready_listeners=[]}:function(){G(i)}),j)}else{i=n[0];if(i.finished){k()}else{i.finished_listeners.push(k)}}}function c(){var o,k=V(f,{}),r=[],p=0,n=false,l;function i(s,t){if(k[T]){ab("script preload finished: "+s.real_src)}s.ready=true;s.exec_trigger=t;q()}function j(s,t){if(k[T]){ab("script execution finished: "+s.real_src)}s.ready=s.finished=true;s.exec_trigger=null;for(var u=0;u<t.scripts.length;u++){if(!t.scripts[u].finished){return}}t.finished=true;q()}function q(){while(p<r.length){if(I(r[p])){if(k[T]){ab("$LAB.wait() executing: "+r[p])}try{r[p++]()}catch(s){if(k[T]){Q("$LAB.wait() error caught: ",s)}}continue}else{if(!r[p].finished){if(ac(r[p])){continue}break}}p++}if(p==r.length){n=false;l=false}}function m(){if(!l||!l.scripts){r.push(l={scripts:[],finished:true})}}o={script:function(){for(var s=0;s<arguments.length;s++){(function(v,t){var w;if(!N(v)){t=[v]}for(var u=0;u<t.length;u++){m();v=t[u];if(I(v)){v=v()}if(!v){continue}if(N(v)){w=[].slice.call(v);w.unshift(u,1);[].splice.apply(t,w);u--;continue}if(typeof v=="string"){v={src:v}}v=V(v,{ready:false,ready_cb:i,finished:false,finished_cb:j});l.finished=false;l.scripts.push(v);e(k,v,l,(a&&n));n=true;if(k[O]){o.wait()}}})(arguments[s],arguments[s])}return o},wait:function(){if(arguments.length>0){for(var s=0;s<arguments.length;s++){r.push(arguments[s])}l=r[r.length-1]}else{l=false}q();return o}};return{script:o.script,wait:o.wait,setOptions:function(s){V(s,k);return o}}}d={setGlobalDefaults:function(i){V(i,f);return d},setOptions:function(){return c().setOptions.apply(null,arguments)},script:function(){return c().script.apply(null,arguments)},wait:function(){return c().wait.apply(null,arguments)},queueScript:function(){h[h.length]={type:"script",args:[].slice.call(arguments)};return d},queueWait:function(){h[h.length]={type:"wait",args:[].slice.call(arguments)};return d},runQueue:function(){var l=d,j=h.length,i=j,k;for(;--i>=0;){k=h.shift();l=l[k.type].apply(null,k.args)}return l},noConflict:function(){M.$LAB=H;return d},sandbox:function(){return P()}};return d}M.$LAB=P();(function(a,c,b){if(document.readyState==null&&document[a]){document.readyState="loading";document[a](c,b=function(){document.removeEventListener(c,b,false);document.readyState="complete"},false)}})("addEventListener","DOMContentLoaded")})(this);
