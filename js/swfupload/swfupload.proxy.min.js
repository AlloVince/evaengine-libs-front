var SWFUpload;if(typeof(SWFUpload)==="function"){SWFUpload.proxyDetect={};SWFUpload.UPLOAD_ERROR.PROXY=-30300;SWFUpload.prototype.initSettings=(function(a){return function(b){if(typeof(a)==="function"){a.call(this,b)}this.ensureDefault=function(d,c){this.settings[d]=(b[d]==undefined)?c:b[d]};this.proxyDetectFileStartTimes={};this.proxyDetectSettings={};this.ensureDefault("proxy_detect_threshold",256000);this.proxyDetectSettings.user_upload_progress_handler=this.settings.upload_progress_handler;this.proxyDetectSettings.user_upload_complete_handler=this.settings.upload_complete_handler;this.settings.upload_progress_handler=SWFUpload.proxyDetect.uploadProgressHandler;this.settings.upload_complete_handler=SWFUpload.proxyDetect.uploadCompleteHandler;delete this.ensureDefault}}(SWFUpload.prototype.initSettings));SWFUpload.proxyDetect.uploadProgressHandler=function(c,h,e){var d=null,f,g,a;try{if(typeof this.proxyDetectSettings.user_upload_progress_handler==="function"){this.proxyDetectSettings.user_upload_progress_handler.call(this,c,h,e)}}catch(d){}if(h===0){this.proxyDetectFileStartTimes[c.ID]=new Date()}else{if(h===e){try{f=new Date();g=f.getTime()-this.proxyDetectFileStartTimes[c.ID].getTime();if(g===0){g=1}a=e/(g*1000);if(a>parseInt(this.settings.proxy_detect_threshold,10)){this.queueEvent("upload_error_handler",[c,SWFUpload.UPLOAD_ERROR.PROXY,a])}}catch(b){}}}if(d!==null){throw (d)}};SWFUpload.proxyDetect.uploadCompleteHandler=function(b){try{delete this.proxyDetectFileStartTimes[b.ID]}catch(a){}if(typeof this.proxyDetectSettings.user_upload_progress_handler==="function"){return this.proxyDetectSettings.user_upload_progress_handler.call(this,b)}}};
